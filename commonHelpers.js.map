{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = `https://pixabay.com`;\nconst END_POINT = `/api/`\n\n\n/* const url= `${BASE_URL}${END_POINT}?${params}`; */\n\n\nexport const searchImages = async(query, page = 1, perPage = 15)=>{\n\ntry{\n  const res = await axios.get(`${BASE_URL}${END_POINT}`, {\n\n    params: {\n\n      key: `44189121-1bd84ab9c2376b17257837ab7`,\n      q: query,\n      image_type: `photo`,\n      orientation: `horizontal`,\n      safesearch: `true`,\n  page: page,\n  per_page: perPage,\n    },\n})\n\n\nreturn res.data;\n\n}catch(error){\n  console.error(\"Error fetching images :\", error);\n  throw error;\n}\n}\n\nsearchImages();","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst instance = new SimpleLightbox(\".gallery a\");\n\n\n\nexport function renderImages(images){\n  const gallery = document.querySelector(\".gallery\");\n  const markup = images.map(image =>\n\n`<a href=\"${image.largeImageURL}\"  class=\"gallery-item\" >\n<img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n<div class=\"info\">¨\n  <p class=\"info-title\">Likes: <span class=\"info-value\">${image.likes}</span> </p>\n  <p class=\"info-title\">Views: <span class=\"info-value\">${image.views}</span></p>\n  <p class=\"info-title\">Comments: <span class=\"info-value\">${image.comments}</span></p>\n  <p class=\"info-title\">Downloads: <span class=\"info-value\">${image.downloads}</span></p>\n</div>\n</a>`\n  ).join(``);\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n  instance.refresh();\n};\n\n\nexport function showLoading(){\n  document.querySelector(\".loader\").classList.remove(`hidden`);\n}\n\nexport function hideLoading(){\n  document.querySelector(\".loader\").classList.add(`hidden`);\n}\n\nexport function showError(message){\n  iziToast.error({\n    title:\"Error\",\n    message: message,\n    posision:\"topRight\"\n\n  })\n\n};\n\nexport const clearGallery= ()=>{\n  document.querySelector(\".gallery\").innerHTML = \"\";\n\n};\n\n\nexport const toggleLoadMoreButton = (show)=>{\n  const loadMoreBtn = document.querySelector(\".load-more\");\n  loadMoreBtn.style.display = show ? \"block\" : \"none\";\n}\nexport const smoothScroll = ()=>{\n  const {\n    height: cardHeight\n  } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n};\n\n","import  {searchImages} from \"./js/pixabay-api.js\";\nimport { showLoading, hideLoading, showError, renderImages, clearGallery, toggleLoadMoreButton, smoothScroll } from \"./js/render-function.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet query = \"\";\nlet page = \"\";\n\nconst formEl = document.querySelector(\".form\")\n\nconst loadMoreBtn = document.querySelector(\".load-more\")\n\n\nconst fetchImages = async() => {\n  showLoading();\n   try{\n    const data = await searchImages(query, page);\n    hideLoading();\n\n    if( data.hits.length === 0 && page === 1){\n      showError ( \"Sorry, there are no images matching your search query. Please try again!\");\n      return;\n    }\nrenderImages(data.hits);\npage += 1;\n\n\n\nif (page * 15 === data.totalHits){\ntoggleLoadMoreButton(false);\niziToast.info({\n  title:\"Error\",\n  message: \"We're sorry, but you've reached the end of search results.\",\n  position: \"topRight\"\n})\n}else{\ntoggleLoadMoreButton(true);\n}\nsmoothScroll();\n}catch(error){\nhideLoading();\nshowError(\"Failed to fetch images. Please try again later!\")\nconsole.error(error);\ntoggleLoadMoreButton(false);\n}\n\n};\n\nformEl.addEventListener(\"submit\", async(e) =>{\n  e.preventDefault();\n\n  query = e.target.elements.query.value.trim();\n\n  if (!query){\n    showError(\"Please enter a search query!\");\n    return;\n  }\n   \n  page = 1;\n  clearGallery();\n  toggleLoadMoreButton(false);\n   await fetchImages();\n});\n\n\n\nloadMoreBtn.addEventListener(\"click\", fetchImages);"],"names":["BASE_URL","END_POINT","searchImages","query","page","perPage","axios","error","instance","SimpleLightbox","renderImages","images","gallery","markup","image","showLoading","hideLoading","showError","message","iziToast","clearGallery","toggleLoadMoreButton","show","loadMoreBtn","smoothScroll","cardHeight","formEl","fetchImages","data"],"mappings":"owBAEA,MAAMA,EAAW,sBACXC,EAAY,QAMLC,EAAe,MAAMC,EAAOC,EAAO,EAAGC,EAAU,KAAK,CAElE,GAAG,CAgBH,OAfc,MAAMC,EAAM,IAAI,GAAGN,CAAQ,GAAGC,CAAS,GAAI,CAErD,OAAQ,CAEN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OAChB,KAAMC,EACN,SAAUC,CACP,CACL,CAAC,GAGU,IAEX,OAAOE,EAAM,CACX,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACA,EAEAL,EAAc,ECzBd,MAAMM,EAAW,IAAIC,EAAe,YAAY,EAIzC,SAASC,EAAaC,EAAO,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GAE5B,YAAYA,EAAM,aAAa;AAAA,YACnBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,0DAEQA,EAAM,KAAK;AAAA,0DACXA,EAAM,KAAK;AAAA,6DACRA,EAAM,QAAQ;AAAA,8DACbA,EAAM,SAAS;AAAA;AAAA,KAG7E,EAAI,KAAK,EAAE,EACTF,EAAQ,mBAAmB,YAAaC,CAAM,EAC9CL,EAAS,QAAO,CAClB,CAGO,SAASO,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,QAAQ,CAC7D,CAEO,SAASC,GAAa,CAC3B,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,QAAQ,CAC1D,CAEO,SAASC,EAAUC,EAAQ,CAChCC,EAAS,MAAM,CACb,MAAM,QACN,QAASD,EACT,SAAS,UAEb,CAAG,CAEH,CAEO,MAAME,EAAc,IAAI,CAC7B,SAAS,cAAc,UAAU,EAAE,UAAY,EAEjD,EAGaC,EAAwBC,GAAO,CAC1C,MAAMC,EAAc,SAAS,cAAc,YAAY,EACvDA,EAAY,MAAM,QAAUD,EAAO,QAAU,MAC/C,EACaE,EAAe,IAAI,CAC9B,KAAM,CACJ,OAAQC,CACZ,EAAM,SAAS,cAAc,UAAU,EAAE,kBAAkB,sBAAqB,EAC9E,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EC/DA,IAAItB,EAAQ,GACRC,EAAO,GAEX,MAAMsB,EAAS,SAAS,cAAc,OAAO,EAEvCH,EAAc,SAAS,cAAc,YAAY,EAGjDI,EAAc,SAAW,CAC7BZ,IACC,GAAG,CACF,MAAMa,EAAO,MAAM1B,EAAaC,EAAOC,CAAI,EAG3C,GAFAY,IAEIY,EAAK,KAAK,SAAW,GAAKxB,IAAS,EAAE,CACvCa,EAAY,0EAA0E,EACtF,MACD,CACLP,EAAakB,EAAK,IAAI,EACtBxB,GAAQ,EAIJA,EAAO,KAAOwB,EAAK,WACvBP,EAAqB,EAAK,EAC1BF,EAAS,KAAK,CACZ,MAAM,QACN,QAAS,6DACT,SAAU,UACZ,CAAC,GAEDE,EAAqB,EAAI,EAEzBG,GACA,OAAOjB,EAAM,CACbS,IACAC,EAAU,iDAAiD,EAC3D,QAAQ,MAAMV,CAAK,EACnBc,EAAqB,EAAK,CAC1B,CAEA,EAEAK,EAAO,iBAAiB,SAAU,MAAM,GAAK,CAK3C,GAJA,EAAE,eAAc,EAEhBvB,EAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OAElC,CAACA,EAAM,CACTc,EAAU,8BAA8B,EACxC,MACD,CAEDb,EAAO,EACPgB,IACAC,EAAqB,EAAK,EACzB,MAAMM,EAAW,CACpB,CAAC,EAIDJ,EAAY,iBAAiB,QAASI,CAAW"}